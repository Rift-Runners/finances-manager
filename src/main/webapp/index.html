<!DOCTYPE html>
<html ng-app="financeApp">
    <head>
        <title>Todo test</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/foundation/6.2.1/foundation.min.css">
        <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.12/css/dataTables.foundation.min.css"/>
        <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/responsive/2.1.0/css/responsive.foundation.min.css"/>
        <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/remodal/1.1.0/remodal-default-theme.min.css"/>
        <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/remodal/1.1.0/remodal.min.css"/>        
        <link rel="stylesheet" href="resources/todo.css">
    </head>
    <body ng-controller="FinancesController" >
        <div class="expanded row">

            <!-- Body table finances -->
            <div class="small-12 medium-12 large-12 columns myFinancesDiv">
                <h2>My Finances</h2>
                <input type="text" ng-model="searchCriteria" placeholder="Search"/>
                <table ng-show="finances.length > 0" class="table table-striped">
                    <thead>
                        <tr>
                            <th></th>
                            <th><a href="" ng-click="orderByField('name')">Name</a></th>
                            <th><a href="" ng-click="orderByField('subject.name')">Subject</a></th> <!-- Group that it belongs (in its respective type) -->
                            <th><a href="" ng-click="orderByField('type')">Type</a></th> <!-- Credit/Debit -->
                            <th><a href="" ng-click="orderByField('financeValue')">Value</a></th>
                            <th><a href="" ng-click="orderByField('paid')">Paid</a></th> <!-- If the Debit is already paid (YES/NO)-->
                            <th>File</th> <!-- If it has a file associated with it -->            
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-class="{'selected bold': finance.selected}"  ng-repeat="finance in finances| filter: searchCriteria | orderBy:sortingRule:sortingDirection">
                            <td><input type="checkbox" ng-model="finance.selected"/></td>
                            <td>{{finance.name}}</td>
                            <td>{{finance.subject.name}}</td>
                            <td>{{finance.type}}</td>
                            <td>{{finance.financeValue| currency}}</td>
                            <td>{{finance.paid}}</td>
                            <td>-</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Button Add Finances -->
            <div class="small-12 medium-12 large-12 columns">
                <a style="border-radius: 20px;" href="#modalFinance" class="success button">Add Finance</a>
            </div>

            <!-- Div modal Debit, Credit and Subject -->
            <div class="remodal-bg">

                <!-- Modal Add Subject -->
                <div class="remodal" data-remodal-id="modalSubject">
                    <button data-remodal-action="close" class="remodal-close"></button>
                    <h1>Add Debit Subject</h1>
                    <form>
                        <div class="expanded row">
                            <div class="medium-12 columns">
                                <label>Name
                                    <input ng-model="subject.name" type="text" placeholder="Name">
                                </label>
                            </div>
                        </div>
                    </form>
                    <br>
                    <button data-remodal-action="cancel" class="remodal-cancel">Cancel</button>
                    <button ng-click="saveSubject(subject)" data-remodal-action="confirm" class="remodal-confirm">Save</button>
                </div>

                <!-- Modal Add Finances -->
                <div class="remodal modalCustom" data-remodal-id="modalFinance">
                    <button data-remodal-action="close" class="remodal-close"></button>
                    <div class="expanded row">
                        <div class="small-12 medium-12 large-12 columns buttonChoiceType">
                            <div class="switch large" ng-model="transaction.type" name="transactionType">
                                <button ng-init="transaction.type = true" ng-class="{'buttonSelected': transaction.type}" class="success hollow button buttonDebitCredit" ng-click="transaction.type = true" ng-disabled="transaction.type"/>Debit</button>
                                <button ng-class="{'buttonSelected': !transaction.type}" class="success hollow button buttonDebitCredit" ng-click="transaction.type = credit" ng-disabled="!transaction.type"/>Credit</button>
                            </div>
                        </div>

                        <!-- Modal Credit -->
                        <div class="small-12 medium-12 large-12 columns" ng-if="!transaction.type">
                            <h2>Credit</h2>
                            <form>
                                <div class="expanded row">
                                    <div class="medium-12 columns">
                                        <label>Value
                                            <input type="text" placeholder="Credit Value">
                                        </label>
                                    </div>
                                    <div class="medium-12 columns">
                                        <label>Subject <a style="border-radius: 20px;" class="success button">Add Subject</a>
                                            <select>
                                                <option value=""></option>
                                                <option value="Salary">Salary</option>
                                                <option value="Beach house rent">Beach house rent</option>
                                            </select>
                                        </label>
                                    </div>
                                    <div class="medium-12 columns">
                                        <a class="expanded success hollow button" href="#">SAVE</a>
                                    </div>
                                </div>
                            </form>
                        </div>

                        <!-- Modal Debit -->
                        <div class="small-12 medium-12 large-12 columns" ng-if="transaction.type">
                            <h2>Debit</h2>
                            <form name="debitForm">
                                <div class="expanded row">
                                    <div class="small-12 medium-12 large-12 columns fieldsCustom">
                                        <label>Name
                                            <input ng-model="finance.name" type="text" placeholder="Name" ng-required="true">
                                        </label>
                                    </div>
                                    <div class="medium-12 columns">
                                        <label>Value
                                            <input ng-model="finance.financeValue" type="number" placeholder="Debit Value" ng-required="true">
                                        </label>
                                    </div>
                                    <div class="medium-12 columns">
                                        <label>Subject <a style="border-radius: 20px;" href="#modalSubject" class="success button">Add Subject</a>
                                            <select ng-options="subject.name for subject in subjects| orderBy: 'name'" ng-model="finance.subject" ng-required="true">
                                                <option value="">Pick a subject</option>
                                            </select>
                                        </label>
                                    </div>
                                    <div class="medium-12 columns">
                                        <label>Payable until
                                            <input type="date" ng-required="true">
                                        </label>
                                    </div>
                                    <div class="medium-12 columns">
                                        <p>Already Paid?</p>
                                        <div class="switch large">
                                            <input ng-init="finance.paid = false" ng-model="finance.paid" class="switch-input" id="yes-no" type="checkbox" name="exampleSwitch">
                                            <label class="switch-paddle" for="yes-no">
                                                <span class="show-for-sr">Already Paid?</span>
                                                <span class="switch-active" aria-hidden="true">Yes</span>
                                                <span class="switch-inactive" aria-hidden="true">No</span>
                                            </label>
                                        </div>
                                    </div>     
                                </div>
                                <div class="medium-12 columns">
                                    <button class="expanded success hollow button" ng-click="saveFinance(finance)" ng-disabled="debitForm.$invalid"/>SAVE</button>
                                </div>
                            </form>
                        </div>

                    </div>
                </div>
            </div>

        </div>

        <script type="text/javascript" src="https://code.jquery.com/jquery-2.2.3.min.js"></script>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/foundation/6.2.1/foundation.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.7/angular.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.7/angular-resource.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.7/angular-route.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/remodal/1.1.0/remodal.min.js"></script>
        <script src="resources/scripts/app.js"></script>
        <script src="resources/scripts/services.js"></script>
        <script src="resources/scripts/controllers.js"></script>
        <script src="resources/scripts/angular-locale_pt-br.js"></script>
    </body>
</html>

